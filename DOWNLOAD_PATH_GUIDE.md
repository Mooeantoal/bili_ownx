# BiliOwnx 下载文件位置指南

## 📁 下载目录结构

```
应用文档目录/downloads/[BVID]/
├── 1_高清 1080P.mp4     # 视频文件
├── 1_audio.m4a          # 音频文件(如果有)
├── 2_高清 1080P.mp4     # 多P视频的第二P
└── 2_audio.m4a          # 第二P的音频文件
```

## 🖥️ 各平台具体路径

### Windows 系统
```
C:\Users\[用户名]\AppData\Roaming\com.example.bili_ownx\downloads\BV1234567890\
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

### Android 系统

#### Android 14+ (API 34+)
```
/storage/emulated/0/Download/BiliOwnx/BV1234567890/
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

#### Android 10-13 (API 29-33)
```
/storage/emulated/0/biliownxdownloads/BV1234567890/
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

#### Android 9 及以下 (API 28-)
```
/storage/emulated/0/Android/data/com.example.bili_ownx/files/downloads/BV1234567890/
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

**备选方案**: 如果无法访问外部存储，会回退到内部存储：
```
/data/data/com.example.bili_ownx/app_flutter/downloads/BV1234567890/
```

### macOS 系统
```
~/Library/Application Support/com.example.bili_ownx/downloads/BV1234567890/
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

### Linux 系统
```
~/.local/share/com.example.bili_ownx/downloads/BV1234567890/
├── 1_高清 1080P.mp4
└── 1_audio.m4a
```

## 📝 文件命名规则

### 视频文件
- **格式**: `[分P序号]_[画质名称].mp4`
- **示例**: 
  - `1_高清 1080P.mp4` - 第1P，高清1080P画质
  - `2_标清 480P.mp4` - 第2P，标清480P画质
  - `3_流畅 360P.mp4` - 第3P，流畅360P画质

### 音频文件
- **格式**: `[分P序号]_audio.m4a`
- **示例**: 
  - `1_audio.m4a` - 第1P的音频文件
  - `2_audio.m4a` - 第2P的音频文件

## 🔍 如何找到下载的文件

### 方法一：通过应用查看
1. 打开 BiliOwnx 应用
2. 进入"下载管理"页面
3. 点击已完成的任务
4. 在任务详情中可以看到具体的保存路径

### 方法二：通过文件管理器
1. 打开系统的文件管理器
2. 根据你的操作系统导航到对应目录
3. 进入 `downloads` 文件夹
4. 按 BVID 查找对应的视频文件夹
5. 文件按分P序号和画质命名

## 💡 实用提示

### 📱 在应用内管理
- **查看路径**: 在下载管理页面可查看每个任务的具体保存路径
- **错误排查**: 下载失败时点击错误图标查看详细日志
- **断点续传**: 重新下载会从上次位置继续，不会重复下载
- **批量操作**: 可以批量暂停、恢复、删除下载任务

### 🔧 技术细节
- **存储方式**: 使用系统应用文档目录，遵循各平台规范
- **目录结构**: 按 BVID 分组，避免文件混乱
- **文件格式**: 视频为 MP4 格式，音频为 M4A 格式
- **元数据**: 下载任务信息保存在 Hive 数据库中

### ⚠️ 注意事项

#### 数据安全
- **应用卸载**: 应用卸载后下载文件会被删除
- **备份建议**: 建议定期备份重要视频文件到外部存储
- **存储空间**: 大文件下载请确保有足够的存储空间

#### 性能优化
- **并发下载**: 同时只能下载一个文件，其他任务排队等待
- **断点续传**: 支持网络中断后继续下载
- **缓存管理**: 已完成的任务可以清理以释放数据库空间

## 🐛 常见问题

### Q: 找不到下载的文件？
A: 
1. 确认下载任务状态为"已完成"
2. 在下载管理页面查看具体保存路径
3. 使用文件管理器导航到对应目录

### Q: 下载失败怎么办？
A:
1. 点击错误图标查看详细错误日志
2. 检查网络连接和存储空间
3. 尝试重新下载或更换画质

### Q: 可以更改下载路径吗？
A: 目前版本使用固定的应用文档目录，后续版本可能会支持自定义路径。

### Q: 音频和视频是分开的？
A: 是的，某些格式的视频会分别下载音频和视频流，播放时自动合并。

---

**最后更新**: 2025-12-03  
**版本**: 1.0.0